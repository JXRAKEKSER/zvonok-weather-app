import{d as f,c as _,o as r,f as o,r as p,t as c,_ as l,k as u,y as $,u as s,z as F,F as w,l as S,a as v,g as h,h as C,q as E,w as g}from"./index-fRIpYGtX.js";import{_ as L,b as N,F as B,a as O}from"./forecast.service-CWKppyGn.js";import{u as I}from"./useConditionLabel-MWR75QXD.js";import{u as z}from"./city.store-B5G6NiG7.js";const M={class:"info-caption"},P={class:"info-caption__text"},D=f({__name:"InfoCaption",props:{message:{}},setup(a){return(e,i)=>(r(),_("div",M,[o("span",P,c(e.message),1),p(e.$slots,"icon",{},void 0,!0)]))}}),T=l(D,[["__scopeId","data-v-e0ab563d"]]),V=f({__name:"FetchingHelper",props:{isLoading:{type:Boolean},error:{},data:{}},setup(a){return(e,i)=>e.isLoading?p(e.$slots,"isLoading",{key:0}):e.error&&!e.isLoading?p(e.$slots,"hasError",{key:1}):e.data!==null?p(e.$slots,"data",{key:2,data:e.data}):p(e.$slots,"default",{key:3},()=>[u(T,{message:"Неизвестная ошибка при загрузке данных"})])}});function H(a){return`${a}:00`}const R={class:"forecast-item"},q={class:"forecast-item__actual-time"},K={class:"forecast-item__day-period"},U={class:"forecast-item__temperature"},W={class:"forecast-item__condition"},j={class:"forecast-item__condition-label forecast-item__condition-label_capitelized_first-letter"},A={class:"forecast-item__wind-speed"},G={class:"forecast-item__humidity"},J=f({__name:"ForecastItem",props:{hourOfMeasurement:{},dayPart:{},temperature:{},condition:{},windSpeed:{},humidity:{}},setup(a){const e=a,{conditionLabel:i}=I($(()=>e.condition));return(t,d)=>(r(),_("li",R,[o("time",q,c(t.hourOfMeasurement?s(H)(t.hourOfMeasurement):"-"),1),o("span",K,c(t.dayPart),1),o("span",U,c(t.temperature)+"°",1),o("div",W,[u(L,{class:"forecast-item__condition-icon",condition:t.condition},null,8,["condition"]),o("span",j,c(s(i)),1)]),o("span",A,c(t.windSpeed)+" м/с",1),o("span",G,c(t.humidity)+" %",1)]))}}),Q=l(J,[["__scopeId","data-v-6a4b5bb1"]]),X={},Y={class:"forecast-item sceleton-card"};function Z(a,e){return r(),_("li",Y,e[0]||(e[0]=[F('<time class="forecast-item__actual-time sceleton__text" data-v-e1d308d9>9:00</time><span class="forecast-item__day-period sceleton__text" data-v-e1d308d9>утро</span><span class="forecast-item__temperature sceleton__text" data-v-e1d308d9>8 °</span><div class="forecast-item__condition" data-v-e1d308d9><div class="sceleton__image" data-v-e1d308d9></div><span class="forecast-item__condition-label forecast-item__condition-label_capitelized_first-letter sceleton__text" data-v-e1d308d9>Солнечно</span></div><span class="forecast-item__wind-speed sceleton__text" data-v-e1d308d9>1 м/с</span><span class="forecast-item__humidity sceleton__text" data-v-e1d308d9>70 %</span>',6)]))}const x=l(X,[["render",Z],["__scopeId","data-v-e1d308d9"]]),ee={class:"forecast-list"},te=f({__name:"ForecastList",props:{forecasts:{}},setup(a){return(e,i)=>(r(),_("ul",ee,[(r(!0),_(w,null,S(e.forecasts,({temperature:t,humidity:d,windSpeed:y,condition:n,hour:m,dayPart:b},k)=>(r(),v(s(Q),{id:k,condition:n,temperature:t,humidity:d,"wind-speed":y,"hour-of-measurement":m,"day-part":b},null,8,["id","condition","temperature","humidity","wind-speed","hour-of-measurement","day-part"]))),256))]))}}),se=l(te,[["__scopeId","data-v-e4a21c0f"]]),ae=new B(new O);function oe(){const a=h(null),e=z(),i=h(!1),t=h(null);async function d(){if(e.currentCity)try{i.value=!0,a.value=await ae.getDailyForecast(e.currentCity.coordinates)}catch(n){n instanceof Error&&(t.value=n),console.log(n)}finally{i.value=!1}}const y=C(()=>{var m;const n=(m=a.value)==null?void 0:m[0];return n?{temperature:n.temperature,humidity:n.humidity,windSpeed:n.windSpeed,condition:n.condition}:{temperature:0,humidity:0,windSpeed:0,condition:N.CONDITION.UNKNOWN}});return E(d),{forecasts:a,isLoadingForecasts:i,forecastsLoadingError:t,summaryForecast:y}}const ie={class:"forecast-summary"},ne={class:"forecast-summary__tempreture"},re={class:"forecast-summary-info forecast-summary__forecast-summary-info"},ce={class:"forecast-summary-info__item forecast-summary-info__item_capitelized_first-letter"},de={class:"forecast-summary-info__item"},_e={class:"forecast-summary-info__item"},me=f({__name:"ForecastSummary",props:{temperature:{},condition:{},humidity:{},windSpeed:{}},setup(a){const e=a,{conditionLabel:i}=I($(()=>e.condition));return(t,d)=>(r(),_("section",ie,[o("h4",ne,c(t.temperature)+" °",1),u(s(L),{class:"forecast-summary__condition-icon",condition:t.condition},null,8,["condition"]),o("ul",re,[o("li",ce,c(s(i)),1),o("li",de," Влажность: "+c(t.humidity)+"% ",1),o("li",_e,"Ветер: "+c(t.windSpeed)+" м/c",1)])]))}}),le=l(me,[["__scopeId","data-v-843ed089"]]),ue={},fe={class:"forecast-summary sceleton-card"};function pe(a,e){return r(),_("section",fe,e[0]||(e[0]=[F('<h4 class="forecast-summary__tempreture sceleton__text" data-v-402c3c72>8 °</h4><div class="forecast-summary__condition-icon sceleton__image" data-v-402c3c72></div><ul class="forecast-summary-info forecast-summary__forecast-summary-info sceleton__list" data-v-402c3c72><li class="forecast-summary-info__item forecast-summary-info__item_capitelized_first-letter sceleton__text" data-v-402c3c72> Облачно </li><li class="forecast-summary-info__item sceleton__text" data-v-402c3c72> Влажность: 70% </li><li class="forecast-summary-info__item sceleton__text" data-v-402c3c72>Ветер: 8м/c</li></ul>',3)]))}const ye=l(ue,[["render",pe],["__scopeId","data-v-402c3c72"]]),he={class:"page-main"},ve={class:"forecast"},ge={style:{display:"grid",gap:"0.5rem"}},$e=f({__name:"PageMain",setup(a){const{forecasts:e,isLoadingForecasts:i,forecastsLoadingError:t,summaryForecast:d}=oe();return(y,n)=>(r(),_("section",he,[o("section",ve,[s(i)?(r(),v(ye,{key:0})):(r(),v(le,{key:1,condition:s(d).condition,humidity:s(d).humidity,temperature:s(d).temperature,"wind-speed":s(d).windSpeed},null,8,["condition","humidity","temperature","wind-speed"])),u(s(V),{error:s(t),data:s(e),"is-loading":s(i)},{data:g(({data:m})=>[u(s(se),{forecasts:m},null,8,["forecasts"])]),isLoading:g(()=>[o("ul",ge,[(r(),_(w,null,S(8,m=>u(s(x))),64))])]),_:1},8,["error","data","is-loading"])])]))}}),Ie=l($e,[["__scopeId","data-v-c3498ff7"]]);export{Ie as default};
